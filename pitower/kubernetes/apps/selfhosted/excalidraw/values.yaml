controllers:
  excalidraw:
    replicas: 1
    strategy: RollingUpdate
    containers:
      app:
        image:
          repository: docker.io/excalidraw/excalidraw
          tag: latest@sha256:b5b9454af5f9c4403ea3b8ef06f2a3e29ac68e79e7d457f373f4d4a4b603d4bc
          pullPolicy: IfNotPresent
        # probes:
        #   liveness:
        #     enabled: true
        #   readiness:
        #     enabled: true
        # resources:
        #   requests:
        #     cpu: 5m
        #     memory: 10Mi
        # limits:
        #   memory: 512Mi
        env:
          PORT: &port 8080
service:
  app:
    controller: excalidraw
    ports:
      http:
        port: *port

route:
  app:
    enabled: true
    hostnames:
      - draw.pitower.link
    parentRefs:
      - name: envoy-external
        namespace: networking
        sectionName: https

# ingress:
#   app:
#     className: external
#     annotations:
#       external-dns.alpha.kubernetes.io/target: external.pitower.link
#     hosts:
#       - host: &host draw.pitower.link
#         paths:
#           - path: /
#             service:
#               identifier: app
#               port: http
#     tls:
#       - hosts:
#           - *host
persistence:
  data:
    enabled: true
    type: emptyDir
